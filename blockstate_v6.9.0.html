<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>BlockState</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@600;700;800;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
:root{
--bg:#07070c;--panel:#141425;--panel2:#0f0f1a;--border:#2a2a3a;
--text:#ffffff;--muted:#9aa0b4;--accent:#6c7cff;
--green:#22c55e;--red:#ef4444;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;overflow-x:hidden;}
canvas#particles{position:fixed;inset:0;z-index:0;pointer-events:none;}

.bottom-left{position:fixed;bottom:14px;left:14px;z-index:10;display:flex;gap:8px;}
.badge{background:#10101a;border:1px solid var(--border);border-radius:12px;padding:8px 12px;font-size:.75rem;font-weight:700;cursor:pointer;}

.container{position:relative;z-index:2;max-width:1200px;margin:0 auto;padding:70px 20px 120px;}
h1{text-align:center;font-size:3rem;font-weight:900;color:var(--accent);font-family:'Inter',sans-serif;}

.section-title{margin:36px 0 14px;text-align:center;font-size:.9rem;font-weight:800;letter-spacing:.4em;color:var(--muted);}

.main{display:grid;grid-template-columns:420px 420px;gap:36px;justify-content:center;align-items:start;}

.panel{background:linear-gradient(135deg,var(--panel),#1d1d32);border:1px solid var(--border);border-radius:20px;padding:22px;}
.primary{width:100%;padding:14px;border-radius:14px;border:none;font-weight:900;cursor:pointer;background:linear-gradient(135deg,var(--accent),#8b5cf6);color:white;margin-bottom:12px;}

label{font-size:.7rem;font-weight:700;color:var(--muted);margin-bottom:6px;display:block;}
input{width:100%;padding:14px;border-radius:12px;border:2px solid var(--border);background:#10101a;color:white;margin-bottom:14px;}

textarea{width:100%;min-height:120px;background:#0d0d16;border:1px solid var(--border);
border-radius:14px;padding:12px;color:white;font-size:.85rem;resize:vertical;}

/* Trending */
.toggle{display:flex;gap:8px;margin-bottom:8px;}
.toggle button{flex:1;padding:8px;border-radius:10px;border:1px solid var(--border);background:#10101a;color:white;font-weight:800;font-size:.7rem;cursor:pointer;}
.toggle button.active{background:var(--accent);}
.trending ul{list-style:none}
.trending li{display:flex;justify-content:space-between;align-items:center;padding:10px 6px;border-bottom:1px solid var(--border);cursor:pointer;}
.trending .left{display:flex;align-items:center;gap:8px;}
.trending img{width:18px;height:18px;border-radius:50%;}
.up{color:var(--green)} .down{color:var(--red)}

/* Widget */
.widget{background:var(--panel2);border-radius:22px;padding:22px;border:2px solid var(--border);}
.widget.positive{border-color:var(--green)} .widget.negative{border-color:var(--red)}
.header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border);padding-bottom:12px;margin-bottom:14px;}
.left{display:flex;gap:12px;align-items:center;}
.coin-img{width:36px;height:36px;border-radius:50%;}
.name{font-size:1.25rem;font-weight:900}
.symbol{font-size:.7rem;color:var(--accent)}
.change{font-size:1.4rem;font-weight:900}
.price{text-align:center;font-size:2.8rem;font-weight:900;margin:14px 0}

.stats{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.stat{background:#0d0d16;border-radius:14px;padding:10px;text-align:center;}
.stat span{display:block;font-size:.65rem;color:var(--muted);margin-bottom:4px;}

.footer{border-top:1px solid var(--border);padding-top:10px;margin-top:12px;font-size:.65rem;color:var(--muted);text-align:center;}

.faq-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.65);align-items:center;justify-content:center;z-index:30;}
.faq-modal .panel{max-width:560px}

@media(max-width:900px){.main{grid-template-columns:1fr}h1{font-size:2.4rem}}
</style>
</head>

<body>

<canvas id="particles"></canvas>

<div class="bottom-left">
<div class="badge">v6.9.0</div>
<div class="badge" onclick="FAQ.open()">FAQ</div>
</div>

<div class="container">
<h1>BlockState</h1>

<div class="main">

<div>
<div class="section-title">CREATE</div>
<div class="panel">
<label>Search Crypto (Top 250)</label>
<input id="search" list="coins" placeholder="e.g. Bitcoin">
<datalist id="coins"></datalist>
<button class="primary" onclick="App.generate()">Create BlockState</button>

<div class="section-title">TRENDING</div>
<div class="toggle">
<button id="gBtn" class="active" onclick="App.showGainers()">GAINERS</button>
<button id="lBtn" onclick="App.showLosers()">LOSERS</button>
</div>
<div class="trending"><ul id="trendList"></ul></div>
</div>
</div>

<div>
<div class="section-title">CAPTURE</div>
<div id="output"></div>

<div class="section-title">SHARE</div>
<div class="panel">
<button class="primary" onclick="App.saveImage()">Save BlockState</button>
<button class="primary" onclick="App.makeCaption()">Create Caption</button>
<textarea id="caption" placeholder="Caption will appear here..." readonly></textarea>
</div>
</div>

</div>
</div>

<div class="faq-modal" id="faq">
<div class="panel">
<h3>What is BlockState?</h3>
<p>BlockState creates clean, shareable snapshots of live cryptocurrency market data.</p>
<h3>Where does the data come from?</h3>
<p>Market data is sourced from CoinGecko. BlockState is not affiliated with CoinGecko.</p>
<h3>Is this financial advice?</h3>
<p>No. BlockState is for informational purposes only.</p>
<h3>Can I share the images?</h3>
<p>Yes. Generated BlockState images are free to post on social media.</p>
<button class="primary" onclick="FAQ.close()">Close</button>
</div>
</div>

<script>
/* PARTICLES */
const canvas=document.getElementById("particles");
const ctx=canvas.getContext("2d");
let w,h,particles=[];
function resize(){w=canvas.width=window.innerWidth;h=canvas.height=window.innerHeight;}
window.addEventListener("resize",resize);resize();
for(let i=0;i<120;i++)particles.push({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,r:Math.random()*1.6+.4});
function tick(){
ctx.clearRect(0,0,w,h);
ctx.fillStyle="rgba(108,124,255,.45)";
particles.forEach(p=>{
p.x+=p.vx;p.y+=p.vy;
if(p.x<0)p.x=w;if(p.x>w)p.x=0;
if(p.y<0)p.y=h;if(p.y>h)p.y=0;
ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();
});
requestAnimationFrame(tick);
}
tick();

/* APP */
const App={
coins:[],current:null,
fmt(v){return Number(v).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});},
fmtCap(v){
if(v>=1e12)return (v/1e12).toFixed(2)+' T';
if(v>=1e9)return (v/1e9).toFixed(2)+' B';
if(v>=1e6)return (v/1e6).toFixed(2)+' M';
return v.toLocaleString();
},
async load(){
const r=await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=1");
this.coins=await r.json();
const dl=document.getElementById("coins");
this.coins.forEach(c=>{
const o=document.createElement("option");
o.value=`${c.symbol.toUpperCase()} — ${c.name}`;
dl.appendChild(o);
});
this.showGainers();
this.show(this.coins[0]);
},
render(list){
trendList.innerHTML="";
list.slice(0,10).forEach(c=>{
const li=document.createElement("li");
li.innerHTML=`<div class="left"><img src="${c.image}"><span>${c.name}</span></div>
<span class="${c.price_change_percentage_24h>=0?'up':'down'}">
${c.price_change_percentage_24h>=0?'▲':'▼'} ${c.price_change_percentage_24h.toFixed(2)}%</span>`;
li.onclick=()=>this.show(c);
trendList.appendChild(li);
});
},
showGainers(){gBtn.classList.add("active");lBtn.classList.remove("active");
this.render([...this.coins].sort((a,b)=>b.price_change_percentage_24h-a.price_change_percentage_24h));},
showLosers(){lBtn.classList.add("active");gBtn.classList.remove("active");
this.render([...this.coins].sort((a,b)=>a.price_change_percentage_24h-b.price_change_percentage_24h));},
generate(){
const v=search.value.toLowerCase();
const c=this.coins.find(x=>v.includes(x.symbol)||v.includes(x.name.toLowerCase()));
if(c)this.show(c);
},
show(c){
this.current=c;
const up=c.price_change_percentage_24h>=0;
output.innerHTML=`<div class="widget ${up?'positive':'negative'}" id="widget">
<div class="header"><div class="left"><img class="coin-img" src="${c.image}">
<div><div class="name">${c.name}</div><div class="symbol">${c.symbol.toUpperCase()}</div></div></div>
<div class="change" style="color:${up?'var(--green)':'var(--red)'}">
${up?'▲':'▼'} ${c.price_change_percentage_24h.toFixed(2)}%</div></div>
<div class="price">$${this.fmt(c.current_price)}</div>
<div class="stats">
<div class="stat"><span>24h High</span>$${this.fmt(c.high_24h)}</div>
<div class="stat"><span>24h Low</span>$${this.fmt(c.low_24h)}</div>
<div class="stat"><span>Market Cap</span>${this.fmtCap(c.market_cap)}</div>
<div class="stat"><span>MC Rank</span>#${c.market_cap_rank}</div>
</div>
<div class="footer">Captured • ${new Date().toUTCString()}<br>Data by CoinGecko • BLOCKSTATE.LIVE</div>
</div>`;
},
saveImage(){
html2canvas(widget,{backgroundColor:null,useCORS:true}).then(c=>{
const a=document.createElement("a");a.download="blockstate.png";a.href=c.toDataURL();a.click();
});
},
makeCaption(){
const c=this.current;if(!c)return;
caption.value=`${c.name} is ${c.price_change_percentage_24h>=0?'up':'down'} ${Math.abs(c.price_change_percentage_24h).toFixed(2)}% in the last 24 hours, trading at $${this.fmt(c.current_price)}.
#${c.symbol.toUpperCase()} #Crypto #BlockState`;
}
};
const FAQ={open(){faq.style.display="flex"},close(){faq.style.display="none"}};
document.addEventListener("DOMContentLoaded",()=>App.load());
</script>

</body>
</html>
