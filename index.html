<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>BlockState</title>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
:root{
--bg:#0b0c10;
--panel:#14162a;
--card:#15172a;
--border:#23243a;
--muted:#8a8fa3;
--accent:#7b7cff;
--green:#22c55e;
--red:#ef4444;
}

*{box-sizing:border-box}

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Inter,sans-serif;
background:#0b0c10;
color:#fff;
overflow-x:hidden;
}

/* PARTICLES */
canvas{
position:fixed;
inset:0;
z-index:-1;
}

/* APP */
.app{
max-width:1200px;
margin:0 auto;
padding:60px 20px 140px;
}

h1{
text-align:center;
font-size:3rem;
color:var(--accent);
margin-bottom:40px;
}

/* FOOTER LEFT */
.footer-left{
position:fixed;
bottom:16px;
left:16px;
display:flex;
gap:8px;
z-index:10;
}
.badge{
padding:6px 12px;
border-radius:999px;
background:#16182a;
border:1px solid var(--border);
font-size:.75rem;
color:#cbd0ff;
}

/* LAYOUT */
.main{
display:grid;
grid-template-columns:380px 520px;
gap:40px;
justify-content:center;
}
@media(max-width:900px){
.main{
grid-template-columns:1fr;
}
}

/* PANEL */
.panel{
background:linear-gradient(180deg,#15172a,#10111d);
border-radius:22px;
padding:24px;
border:1px solid var(--border);
}

/* TITLES */
.section-title{
text-align:center;
margin-bottom:14px;
font-weight:700;
letter-spacing:.18em;
color:var(--muted);
}

/* INPUT */
input{
width:100%;
padding:14px;
border-radius:12px;
border:1px solid var(--border);
background:#0e0f1c;
color:#fff;
margin-bottom:14px;
}

/* QUICK */
.quick{
display:grid;
grid-template-columns:repeat(5,1fr);
gap:8px;
margin-bottom:14px;
}
.quick button{
padding:10px;
border-radius:10px;
background:#17192d;
border:1px solid var(--border);
color:#fff;
font-weight:700;
}

/* PRIMARY */
.primary{
width:100%;
padding:14px;
border-radius:12px;
border:none;
background:linear-gradient(135deg,#6f7cff,#8b5cf6);
color:#fff;
font-weight:800;
margin-bottom:18px;
}

/* TRENDING */
.trending h4{
margin:0 0 10px;
font-size:.9rem;
color:var(--muted);
}
.trending-item{
display:flex;
justify-content:space-between;
padding:10px 0;
border-bottom:1px solid var(--border);
cursor:pointer;
}
.trending-item span:last-child.up{color:var(--green)}
.trending-item span:last-child.down{color:var(--red)}

/* CARD */
.card{
background:linear-gradient(180deg,#15172a,#0f101c);
border-radius:22px;
padding:24px;
border:1px solid var(--border);
width:100%;
max-width:520px;
animation:enter .25s ease;
}
@keyframes enter{
from{transform:scale(.98);opacity:0}
to{transform:scale(1);opacity:1}
}

.card-header{
display:flex;
justify-content:space-between;
align-items:center;
}

.asset{
display:flex;
gap:10px;
align-items:center;
}
.asset img{
width:32px;
height:32px;
border-radius:50%;
}

.price{
font-size:3rem;
font-weight:900;
margin:20px 0;
text-align:center;
}

.stats{
display:grid;
grid-template-columns:1fr 1fr;
gap:12px;
}

.stat{
background:#101225;
border-radius:12px;
padding:12px;
font-size:.9rem;
}
.stat span{
display:block;
font-size:.7rem;
color:var(--muted);
}

.card-footer{
margin-top:16px;
font-size:.7rem;
color:var(--muted);
text-align:center;
}

/* SHARE */
.share{
margin-top:26px;
}
.share-carousel{
display:flex;
gap:14px;
overflow-x:auto;
padding-bottom:6px;
}
.share-card{
min-width:160px;
height:90px;
border-radius:14px;
background:#101225;
border:1px solid var(--border);
display:flex;
align-items:center;
justify-content:center;
color:var(--muted);
font-size:.75rem;
}

/* ACTION BUTTONS */
.share-actions{
display:flex;
justify-content:center;
gap:12px;
margin-top:14px;
}
.share-actions button{
padding:10px 14px;
border-radius:999px;
background:#17192d;
border:1px solid var(--border);
color:#fff;
font-weight:700;
}
body.exporting .share-actions{display:none}
</style>
</head>

<body>

<canvas id="particles"></canvas>

<div class="footer-left">
  <div class="badge">v7.2</div>
  <div class="badge">FAQ</div>
</div>

<div class="app">
<h1>BlockState</h1>

<div class="main">

<!-- CREATE -->
<div class="panel">
<div class="section-title">CREATE</div>

<input placeholder="BTC, SOL, BONK">

<div class="quick">
<button onclick="loadSymbol('bitcoin')">BTC</button>
<button onclick="loadSymbol('ethereum')">ETH</button>
<button onclick="loadSymbol('tether')">USDT</button>
<button onclick="loadSymbol('bnb')">BNB</button>
<button onclick="loadSymbol('ripple')">XRP</button>
</div>

<button class="primary" onclick="generate()">Create BlockState</button>

<div class="trending">
<h4>Trending (24h movers)</h4>
<div id="trending"></div>
</div>
</div>

<!-- CAPTURE -->
<div>
<div class="section-title">CAPTURE</div>
<div id="cardContainer"></div>

<div class="share">
<div class="section-title">SHARE</div>

<div class="share-carousel">
<div class="share-card">X</div>
<div class="share-card">Instagram</div>
<div class="share-card">Messages</div>
<div class="share-card">Stories</div>
</div>

<div class="share-actions">
<button onclick="saveImage()">Save Image</button>
<button onclick="shareNative()">Messages</button>
</div>
</div>

</div>
</div>
</div>

<script>
/* PARTICLES */
const c=document.getElementById("particles"),x=c.getContext("2d");
let w,h,p=[];
function resize(){w=c.width=innerWidth;h=c.height=innerHeight}
window.onresize=resize;resize();
for(let i=0;i<120;i++)p.push({x:Math.random()*w,y:Math.random()*h,v:Math.random()*0.4+0.1});
(function anim(){
x.clearRect(0,0,w,h);
x.fillStyle="#6f7cff";
p.forEach(d=>{
d.y+=d.v;
if(d.y>h)d.y=0;
x.fillRect(d.x,d.y,1,1);
});
requestAnimationFrame(anim);
})();

/* DATA */
const API="https://api.coingecko.com/api/v3";
let currentId="bitcoin";

async function icon64(url){
const r=await fetch(url);const b=await r.blob();
return new Promise(res=>{const f=new FileReader();f.onload=()=>res(f.result);f.readAsDataURL(b);});
}

async function generate(id){
if(!id) id=currentId;
currentId=id;
const r=await fetch(`${API}/coins/${id}?localization=false&tickers=false&community_data=false&developer_data=false`);
const c=await r.json();
const icon=await icon64(c.image.small);

document.getElementById("cardContainer").innerHTML=`
<div class="card" id="card">
<div class="card-header">
<div class="asset">
<img src="${icon}">
<div>
<strong>${c.name}</strong>
<div style="font-size:.75rem;color:var(--muted)">${c.symbol.toUpperCase()}</div>
</div>
</div>
<div>${c.market_data.price_change_percentage_24h.toFixed(2)}%</div>
</div>

<div class="price">$${c.market_data.current_price.usd.toLocaleString()}</div>

<div class="stats">
<div class="stat"><span>24h High</span>$${c.market_data.high_24h.usd.toLocaleString()}</div>
<div class="stat"><span>24h Low</span>$${c.market_data.low_24h.usd.toLocaleString()}</div>
<div class="stat"><span>Market Cap</span>$${(c.market_data.market_cap.usd/1e12).toFixed(2)}T</div>
<div class="stat"><span>MC Rank</span>#${c.market_cap_rank}</div>
</div>

<div class="card-footer">
Captured â€¢ ${new Date().toUTCString()}<br>BLOCKSTATE.LIVE
</div>
</div>`;
}

async function loadTrending(){
const r=await fetch(`${API}/coins/markets?vs_currency=usd&order=price_change_percentage_24h_desc&per_page=10&page=1`);
const d=await r.json();
document.getElementById("trending").innerHTML=d.map(c=>`
<div class="trending-item" onclick="loadSymbol('${c.id}')">
<span>${c.name}</span>
<span class="${c.price_change_percentage_24h>=0?'up':'down'}">
${c.price_change_percentage_24h.toFixed(2)}%
</span>
</div>`).join("");
}

function loadSymbol(id){generate(id)}

async function saveImage(){
document.body.classList.add("exporting");
const canvas=await html2canvas(document.getElementById("card"),{scale:2});
const a=document.createElement("a");
a.href=canvas.toDataURL();
a.download="blockstate.png";
a.click();
document.body.classList.remove("exporting");
}

async function shareNative(){
if(!navigator.share){alert("Sharing supported on mobile only");return;}
const canvas=await html2canvas(document.getElementById("card"),{scale:2});
canvas.toBlob(b=>{
navigator.share({
title:"BlockState",
text:"Captured with BlockState",
files:[new File([b],"blockstate.png",{type:"image/png"})],
url:"https://blockstate.live"
});
});
}

generate("bitcoin");
loadTrending();
setInterval(loadTrending,20*60*1000);
</script>

</body>
</html>
