<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticker Snapshot</title>
    <style>
        :root{--bg:#0a0a0f;--bg2:#15151f;--bg3:#1a1a28;--text:#fff;--text2:#a0a0b0;--accent:#5b7cff;--green:#22c55e;--red:#ef4444;--border:#2a2a3a}
        *{margin:0;padding:0;box-sizing:border-box}
        html,body{overflow-x:hidden;width:100%;max-width:100vw}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);padding:20px;min-height:100vh}
        .version{position:fixed;top:20px;left:20px;padding:8px 16px;background:rgba(91,124,255,0.25);border:2px solid var(--accent);border-radius:8px;font-size:0.8rem;font-weight:700;color:var(--accent);z-index:9999;letter-spacing:0.5px}
        header{text-align:center;margin-bottom:40px;padding-top:20px}
        h1{font-size:2.5rem;font-weight:800;background:linear-gradient(135deg,var(--accent),#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px}
        .subtitle{color:var(--text2);font-size:1.1rem}
        .carousel{width:100%;margin:0 auto 60px;overflow:hidden}
        .carousel-inner{display:flex;gap:24px;overflow-x:auto;scroll-snap-type:x mandatory;padding:24px 0;scrollbar-width:thin;scrollbar-color:var(--accent) transparent}
        .carousel-inner::-webkit-scrollbar{height:8px}
        .carousel-inner::-webkit-scrollbar-track{background:transparent}
        .carousel-inner::-webkit-scrollbar-thumb{background:var(--accent);border-radius:4px}
        .hero-card{min-width:380px;max-width:380px;height:280px;background:linear-gradient(135deg,var(--bg3),#1f1f30);border:3px solid var(--border);border-radius:20px;padding:32px;cursor:pointer;transition:all 0.4s;flex-shrink:0;scroll-snap-align:start;position:relative;display:flex;flex-direction:column;justify-content:space-between}
        .hero-card:hover{transform:translateY(-8px);border-color:var(--accent)}
        .hero-card.positive{border-color:var(--green);box-shadow:0 0 40px rgba(34,197,94,0.4),0 12px 35px rgba(34,197,94,0.3)}
        .hero-card.negative{border-color:var(--red);box-shadow:0 0 40px rgba(239,68,68,0.4),0 12px 35px rgba(239,68,68,0.3)}
        .hero-header{margin-bottom:20px}
        .hero-name{font-size:1.4rem;font-weight:800;margin-bottom:6px;letter-spacing:-0.3px}
        .hero-symbol{font-size:0.95rem;color:var(--accent);font-weight:600;letter-spacing:0.5px}
        .hero-price{font-size:2.8rem;font-weight:900;margin-bottom:12px;letter-spacing:-1px;line-height:1}
        .hero-change{font-size:1.1rem;font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:6px}
        .hero-change.positive{color:var(--green)}
        .hero-change.negative{color:var(--red)}
        .hero-stats{display:flex;justify-content:space-between;padding-top:16px;border-top:1px solid var(--border)}
        .hero-stat{text-align:center}
        .hero-stat-label{font-size:0.75rem;color:var(--text2);margin-bottom:4px;text-transform:uppercase;letter-spacing:0.5px}
        .hero-stat-value{font-size:1rem;font-weight:700}
        .hero-loading{display:flex;align-items:center;justify-content:center;height:100%;color:var(--text2);font-size:1.1rem}
        .container{max-width:700px;margin:0 auto}
        .section-title{text-align:center;font-size:1.6rem;font-weight:700;margin-bottom:10px}
        .section-subtitle{text-align:center;color:var(--text2);margin-bottom:30px}
        .input-box{background:var(--bg2);padding:35px;border-radius:16px;border:1px solid var(--border);margin-bottom:40px}
        .tabs{display:flex;gap:15px;margin-bottom:25px}
        .tab{flex:1;padding:16px;background:transparent;border:2px solid var(--border);border-radius:10px;color:var(--text2);font-weight:700;text-transform:uppercase;cursor:pointer;transition:all 0.3s;font-size:1rem}
        .tab.active{border-color:var(--accent);color:var(--accent);box-shadow:0 0 20px rgba(91,124,255,0.15)}
        .search-wrapper{position:relative}
        .search-input{width:100%;padding:18px 20px 18px 55px;background:var(--bg3);border:2px solid var(--border);border-radius:10px;color:var(--text);font-size:1.1rem;transition:all 0.3s}
        .search-input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 4px rgba(91,124,255,0.1)}
        .search-icon{position:absolute;left:20px;top:50%;transform:translateY(-50%);font-size:1.3rem}
        .generate-btn{width:100%;padding:16px;background:linear-gradient(135deg,var(--accent),#8b5cf6);border:none;color:#fff;font-size:1.05rem;font-weight:700;border-radius:10px;cursor:pointer;text-transform:uppercase;transition:all 0.3s;margin-top:20px}
        .generate-btn:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(91,124,255,0.3)}
        .generate-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}
        .dropdown{position:absolute;top:calc(100% + 5px);left:0;right:0;background:var(--bg3);border:2px solid var(--accent);border-radius:10px;max-height:350px;overflow-y:auto;z-index:1000;display:none}
        .dropdown.show{display:block}
        .dropdown-item{padding:15px 20px 15px 55px;cursor:pointer;border-bottom:1px solid var(--border)}
        .dropdown-item:hover{background:rgba(91,124,255,0.1)}
        .dropdown-symbol{font-weight:700;display:block;margin-bottom:3px}
        .result{display:none;margin-bottom:40px}
        .result.show{display:block}
        .snapshot-widget{max-width:700px;min-height:550px;margin:0 auto 25px;background:linear-gradient(135deg,var(--bg3),#1f1f30);border:3px solid var(--border);border-radius:24px;padding:60px;box-shadow:0 20px 60px rgba(0,0,0,0.5);transition:all 0.4s;display:flex;flex-direction:column;justify-content:space-between}
        .snapshot-widget.positive{border-color:var(--green);box-shadow:0 0 50px rgba(34,197,94,0.5),0 20px 60px rgba(0,0,0,0.5)}
        .snapshot-widget.negative{border-color:var(--red);box-shadow:0 0 50px rgba(239,68,68,0.5),0 20px 60px rgba(0,0,0,0.5)}
        .snapshot-badge{display:inline-block;padding:12px 28px;background:rgba(91,124,255,0.15);border:2px solid var(--accent);border-radius:30px;color:var(--accent);font-size:1.2rem;font-weight:800;margin-bottom:40px;letter-spacing:1.5px}
        .snapshot-price-section{text-align:center;margin:40px 0}
        .snapshot-price-label{font-size:1rem;color:var(--text2);margin-bottom:12px;text-transform:uppercase;letter-spacing:1.5px;font-weight:700}
        .snapshot-price{font-size:5rem;font-weight:900;line-height:1;margin-bottom:24px;letter-spacing:-3px}
        .snapshot-change{font-size:1.8rem;font-weight:700;display:flex;align-items:center;justify-content:center;gap:12px}
        .snapshot-change.positive{color:var(--green)}
        .snapshot-change.negative{color:var(--red)}
        .snapshot-stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:24px;margin:40px 0;padding:32px 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
        .snapshot-stat{text-align:center}
        .snapshot-stat-label{font-size:0.85rem;color:var(--text2);margin-bottom:10px;text-transform:uppercase;letter-spacing:1px;font-weight:600}
        .snapshot-stat-value{font-size:1.6rem;font-weight:800}
        .snapshot-footer{text-align:center;margin-top:30px}
        .snapshot-time{color:var(--text2);font-size:0.95rem;margin-bottom:12px}
        .snapshot-brand{color:var(--text2);font-size:1rem;font-weight:800;text-transform:uppercase;letter-spacing:3px}
        .export-btn{width:100%;padding:18px;background:linear-gradient(135deg,var(--green),#16a34a);border:none;color:#fff;font-size:1.1rem;font-weight:700;border-radius:10px;cursor:pointer;text-transform:uppercase;transition:all 0.3s;display:flex;align-items:center;justify-content:center;gap:10px}
        .export-btn:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(34,197,94,0.3)}
        .error{background:rgba(239,68,68,0.1);border:1px solid var(--red);padding:20px;border-radius:10px;color:var(--red);text-align:center;margin-bottom:30px;display:none;font-weight:600}
        .error.show{display:block}
    </style>
</head>
<body>
    <div class="version">v3.0.0</div>
    <header>
        <h1>Ticker Snapshot</h1>
        <p class="subtitle">Instant market prices, shareable as images</p>
    </header>
    <div class="carousel">
        <div class="carousel-inner">
            <div class="hero-card" id="hero-btc" onclick="quickGen('BTC','crypto')">
                <div class="hero-loading">Loading Bitcoin...</div>
            </div>
            <div class="hero-card" id="hero-eth" onclick="quickGen('ETH','crypto')">
                <div class="hero-loading">Loading Ethereum...</div>
            </div>
            <div class="hero-card" id="hero-sol" onclick="quickGen('SOL','crypto')">
                <div class="hero-loading">Loading Solana...</div>
            </div>
            <div class="hero-card" id="hero-aapl" onclick="quickGen('AAPL','stock')">
                <div class="hero-loading">Loading Apple...</div>
            </div>
        </div>
    </div>
    <div class="container">
        <h2 class="section-title">Generate Snapshot</h2>
        <p class="section-subtitle">Search any stock or cryptocurrency</p>
        <div class="input-box">
            <div class="tabs">
                <button class="tab active" id="stockTab" onclick="setType('stock')">Stocks</button>
                <button class="tab" id="cryptoTab" onclick="setType('crypto')">Crypto</button>
            </div>
            <div class="search-wrapper">
                <span class="search-icon">ğŸ”</span>
                <input type="text" class="search-input" id="searchInput" placeholder="Type symbol (e.g., AAPL, BTC)..." autocomplete="off">
                <div class="dropdown" id="dropdown"></div>
            </div>
            <button class="generate-btn" onclick="generate()">Create Snapshot</button>
        </div>
        <div class="error" id="error"></div>
        <div class="result" id="result"></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
let activeType='stock';
const STOCKS=['AAPL','MSFT','GOOGL','AMZN','TSLA','META','NVDA','JPM','V','WMT'];
const CRYPTO=['BTC','ETH','BNB','XRP','SOL','ADA','DOT','DOGE','MATIC','AVAX'];
const COIN_MAP={'BTC':'bitcoin','ETH':'ethereum','SOL':'solana','BNB':'binancecoin','XRP':'ripple','ADA':'cardano','DOT':'polkadot','DOGE':'dogecoin','MATIC':'matic-network','AVAX':'avalanche-2'};

window.addEventListener(â€˜DOMContentLoadedâ€™,()=>{
loadHero(â€˜BTCâ€™,â€˜Bitcoinâ€™,â€˜btcâ€™);
loadHero(â€˜ETHâ€™,â€˜Ethereumâ€™,â€˜ethâ€™);
loadHero(â€˜SOLâ€™,â€˜Solanaâ€™,â€˜solâ€™);
loadHeroStock(â€˜AAPLâ€™,â€˜Appleâ€™,â€˜aaplâ€™);
});

async function loadHero(sym,name,id){
try{
const coinId=COIN_MAP[sym]||sym.toLowerCase();
const res=await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}?localization=false&tickers=false&community_data=false&developer_data=false`);
const data=await res.json();
const price=data.market_data.current_price.usd;
const change=data.market_data.price_change_percentage_24h;
const high=data.market_data.high_24h.usd;
const low=data.market_data.low_24h.usd;
const vol=data.market_data.total_volume.usd;
renderHero(id,name,sym,price,change,high,low,vol);
}catch(e){
document.getElementById(â€˜hero-â€™+id).innerHTML=â€™<div class="hero-loading">Failed to load</div>â€™;
}
}

async function loadHeroStock(sym,name,id){
try{
const res=await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${sym}&apikey=demo`);
const data=await res.json();
if(!data[â€˜Global Quoteâ€™])throw new Error(â€˜Failedâ€™);
const q=data[â€˜Global Quoteâ€™];
const price=parseFloat(q[â€˜05. priceâ€™]);
const change=parseFloat(q[â€˜10. change percentâ€™].replace(â€™%â€™,â€™â€™));
const high=parseFloat(q[â€˜03. highâ€™]);
const low=parseFloat(q[â€˜04. lowâ€™]);
const vol=parseFloat(q[â€˜06. volumeâ€™]);
renderHero(id,name,sym,price,change,high,low,vol);
}catch(e){
document.getElementById(â€˜hero-â€™+id).innerHTML=â€™<div class="hero-loading">Market Closed</div>â€™;
}
}

function renderHero(id,name,sym,price,change,high,low,vol){
const card=document.getElementById(â€˜hero-â€™+id);
const isPos=change>=0;
card.className=â€™hero-card â€™+(isPos?â€˜positiveâ€™:â€˜negativeâ€™);
card.innerHTML=`<div class="hero-header"> <div class="hero-name">${name}</div> <div class="hero-symbol">${sym}</div> </div> <div> <div class="hero-price">$${fmt(price)}</div> <div class="hero-change ${isPos?'positive':'negative'}"> <span>${isPos?'â–²':'â–¼'}</span> <span>${isPos?'+':''}${change.toFixed(2)}%</span> </div> <div class="hero-stats"> <div class="hero-stat"> <div class="hero-stat-label">High</div> <div class="hero-stat-value">$${fmt(high)}</div> </div> <div class="hero-stat"> <div class="hero-stat-label">Low</div> <div class="hero-stat-value">$${fmt(low)}</div> </div> </div> </div>`;
}

function quickGen(sym,type){
document.getElementById(â€˜searchInputâ€™).value=sym;
setType(type);
generate();
setTimeout(()=>window.scrollTo({top:document.body.scrollHeight,behavior:â€˜smoothâ€™}),200);
}

function setType(type){
activeType=type;
document.getElementById(â€˜stockTabâ€™).classList.remove(â€˜activeâ€™);
document.getElementById(â€˜cryptoTabâ€™).classList.remove(â€˜activeâ€™);
document.getElementById(type+â€˜Tabâ€™).classList.add(â€˜activeâ€™);
document.getElementById(â€˜dropdownâ€™).classList.remove(â€˜showâ€™);
}

document.getElementById(â€˜searchInputâ€™).addEventListener(â€˜inputâ€™,function(e){
const q=e.target.value.trim().toUpperCase();
const dd=document.getElementById(â€˜dropdownâ€™);
if(q.length<1){dd.classList.remove(â€˜showâ€™);return}
const list=activeType===â€˜stockâ€™?STOCKS:CRYPTO;
const matches=list.filter(s=>s.includes(q));
if(matches.length){
dd.innerHTML=matches.map(s=>â€™<div class="dropdown-item" onclick="pick(\''+s+'\')"><span class="dropdown-symbol">â€™+s+â€™</span></div>â€™).join(â€™â€™);
dd.classList.add(â€˜showâ€™);
}else{dd.classList.remove(â€˜showâ€™)}
});

document.getElementById(â€˜searchInputâ€™).addEventListener(â€˜keypressâ€™,function(e){
if(e.key===â€˜Enterâ€™)generate()
});

function pick(s){
document.getElementById(â€˜searchInputâ€™).value=s;
document.getElementById(â€˜dropdownâ€™).classList.remove(â€˜showâ€™);
}

async function generate(){
const sym=document.getElementById(â€˜searchInputâ€™).value.trim().toUpperCase();
if(!sym){
document.getElementById(â€˜errorâ€™).textContent=â€˜Please enter a symbolâ€™;
document.getElementById(â€˜errorâ€™).classList.add(â€˜showâ€™);
return;
}

```
document.getElementById('error').classList.remove('show');
document.getElementById('result').innerHTML='<div style="text-align:center;padding:40px;color:#a0a0b0;">Loading...</div>';
document.getElementById('result').classList.add('show');

try{
    let price,change,high,low,vol,mcap;
    
    if(activeType==='crypto'){
        const coinId=COIN_MAP[sym]||sym.toLowerCase();
        const res=await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}?localization=false&tickers=false&community_data=false&developer_data=false`);
        const data=await res.json();
        price=data.market_data.current_price.usd;
        change=data.market_data.price_change_percentage_24h;
        high=data.market_data.high_24h.usd;
        low=data.market_data.low_24h.usd;
        vol=data.market_data.total_volume.usd;
        mcap=data.market_data.market_cap.usd;
    }else{
        const res=await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${sym}&apikey=demo`);
        const data=await res.json();
        if(!data['Global Quote'])throw new Error('Stock not found');
        const q=data['Global Quote'];
        price=parseFloat(q['05. price']);
        change=parseFloat(q['10. change percent'].replace('%',''));
        high=parseFloat(q['03. high']);
        low=parseFloat(q['04. low']);
        vol=parseFloat(q['06. volume']);
        mcap=0;
    }
    
    renderSnapshot(sym,price,change,high,low,vol,mcap);
}catch(e){
    document.getElementById('error').textContent='Failed to load: '+e.message;
    document.getElementById('error').classList.add('show');
    document.getElementById('result').classList.remove('show');
}
```

}

function renderSnapshot(sym,price,change,high,low,vol,mcap){
const isPos=change>=0;
const html=`<div class="snapshot-widget ${isPos?'positive':'negative'}" id="snapshot"> <div> <div class="snapshot-badge">${sym}</div> </div> <div class="snapshot-price-section"> <div class="snapshot-price-label">Current Price</div> <div class="snapshot-price">$${fmt(price)}</div> <div class="snapshot-change ${isPos?'positive':'negative'}"> <span>${isPos?'â–²':'â–¼'}</span> <span>${isPos?'+':''}${change.toFixed(2)}%</span> </div> </div> <div class="snapshot-stats"> <div class="snapshot-stat"> <div class="snapshot-stat-label">24h High</div> <div class="snapshot-stat-value">$${fmt(high)}</div> </div> <div class="snapshot-stat"> <div class="snapshot-stat-label">24h Low</div> <div class="snapshot-stat-value">$${fmt(low)}</div> </div> <div class="snapshot-stat"> <div class="snapshot-stat-label">Volume</div> <div class="snapshot-stat-value">${fmtVol(vol)}</div> </div> </div> <div class="snapshot-footer"> <div class="snapshot-time">Snapshot: ${getTime()}</div> <div class="snapshot-brand">Ticker Snapshot</div> </div> </div> <button class="export-btn" onclick="save()"> <span>ğŸ’¾</span> <span>Save as Image</span> </button>`;
document.getElementById(â€˜resultâ€™).innerHTML=html;
}

function save(){
const btn=event.target;
btn.disabled=true;
btn.innerHTML=â€™<span>â³</span> Savingâ€¦â€™;
html2canvas(document.getElementById(â€˜snapshotâ€™),{scale:2,backgroundColor:â€™#1a1a28â€™}).then(canvas=>{
canvas.toBlob(blob=>{
const url=URL.createObjectURL(blob);
const a=document.createElement(â€˜aâ€™);
a.href=url;
a.download=â€˜ticker-â€™+document.getElementById(â€˜searchInputâ€™).value+â€™-â€™+new Date().toISOString().slice(0,19).replace(/:/g,â€™-â€™)+â€™.pngâ€™;
a.click();
URL.revokeObjectURL(url);
btn.disabled=false;
btn.innerHTML=â€™<span>ğŸ’¾</span><span>Save as Image</span>â€™;
});
});
}

function fmt(p){
if(p>=1)return p.toLocaleString(â€˜en-USâ€™,{minimumFractionDigits:2,maximumFractionDigits:2});
if(p>=0.01)return p.toLocaleString(â€˜en-USâ€™,{minimumFractionDigits:4,maximumFractionDigits:4});
return p.toLocaleString(â€˜en-USâ€™,{minimumFractionDigits:6,maximumFractionDigits:6});
}

function fmtVol(v){
if(v>=1e9)return â€˜$â€™+(v/1e9).toFixed(2)+â€˜Bâ€™;
if(v>=1e6)return â€˜$â€™+(v/1e6).toFixed(2)+â€˜Mâ€™;
if(v>=1e3)return â€˜$â€™+(v/1e3).toFixed(2)+â€˜Kâ€™;
return â€˜$â€™+v.toFixed(0);
}

function getTime(){
const d=new Date(),m=[â€˜Janâ€™,â€˜Febâ€™,â€˜Marâ€™,â€˜Aprâ€™,â€˜Mayâ€™,â€˜Junâ€™,â€˜Julâ€™,â€˜Augâ€™,â€˜Sepâ€™,â€˜Octâ€™,â€˜Novâ€™,â€˜Decâ€™];
let h=d.getHours();
const mm=d.getMinutes().toString().padStart(2,â€˜0â€™),s=d.getSeconds().toString().padStart(2,â€˜0â€™),ap=h>=12?â€˜PMâ€™:â€˜AMâ€™;
h=h%12||12;
return m[d.getMonth()]+â€™ â€˜+d.getDate()+â€™, â€˜+d.getFullYear()+â€™ at â€˜+h+â€™:â€™+mm+â€™:â€™+s+â€™ â€™+ap;
}
</script>

</body>
</html>