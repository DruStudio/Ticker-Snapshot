<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticker Snapshot</title>
    <style>
        :root{--bg:#0a0a0f;--bg2:#15151f;--bg3:#1a1a28;--text:#fff;--text2:#a0a0b0;--accent:#5b7cff;--green:#22c55e;--red:#ef4444;--border:#2a2a3a}
        *{margin:0;padding:0;box-sizing:border-box}
        html,body{overflow-x:hidden;width:100%;max-width:100vw}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);padding:20px;min-height:100vh}
        header{text-align:center;margin-bottom:40px;padding-top:20px}
        h1{font-size:2.5rem;font-weight:800;background:linear-gradient(135deg,var(--accent),#8b5cf6,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px}
        .subtitle{color:var(--text2);font-size:1.1rem}
        .carousel{width:100%;margin:0 auto 60px;overflow:hidden}
        .carousel-inner{display:flex;gap:20px;overflow-x:auto;scroll-snap-type:x mandatory;padding:20px 0;scrollbar-width:thin;scrollbar-color:var(--accent) transparent}
        .carousel-inner::-webkit-scrollbar{height:8px}
        .carousel-inner::-webkit-scrollbar-track{background:transparent}
        .carousel-inner::-webkit-scrollbar-thumb{background:var(--accent);border-radius:4px}
        .card{min-width:280px;max-width:280px;height:200px;background:var(--bg3);border:1px solid var(--border);border-radius:16px;padding:25px;cursor:pointer;transition:all 0.3s;flex-shrink:0;scroll-snap-align:start}
        .card:hover{transform:translateY(-5px);border-color:var(--accent);box-shadow:0 10px 30px rgba(91,124,255,0.2)}
        .card-name{font-size:1.2rem;font-weight:700;margin-bottom:5px}
        .card-symbol{font-size:0.85rem;color:var(--accent);font-weight:600;margin-bottom:15px}
        .card-widget{width:100%;height:110px}
        .container{max-width:650px;margin:0 auto}
        .section-title{text-align:center;font-size:1.6rem;font-weight:700;margin-bottom:10px}
        .section-subtitle{text-align:center;color:var(--text2);margin-bottom:30px}
        .input-box{background:var(--bg2);padding:35px;border-radius:16px;border:1px solid var(--border);margin-bottom:40px}
        .tabs{display:flex;gap:15px;margin-bottom:25px}
        .tab{flex:1;padding:16px;background:transparent;border:2px solid var(--border);border-radius:10px;color:var(--text2);font-weight:700;text-transform:uppercase;cursor:pointer;transition:all 0.3s;font-size:1rem}
        .tab.active{border-color:var(--accent);color:var(--accent);box-shadow:0 0 20px rgba(91,124,255,0.15)}
        .search-wrapper{position:relative}
        .search-input{width:100%;padding:18px 20px 18px 55px;background:var(--bg3);border:2px solid var(--border);border-radius:10px;color:var(--text);font-size:1.1rem;transition:all 0.3s}
        .search-input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 4px rgba(91,124,255,0.1)}
        .search-icon{position:absolute;left:20px;top:50%;transform:translateY(-50%);font-size:1.3rem}
        .generate-btn{width:100%;padding:16px;background:linear-gradient(135deg,var(--accent),#8b5cf6);border:none;color:#fff;font-size:1.05rem;font-weight:700;border-radius:10px;cursor:pointer;text-transform:uppercase;transition:all 0.3s;margin-top:20px}
        .generate-btn:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(91,124,255,0.3)}
        .generate-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}
        .dropdown{position:absolute;top:calc(100% + 5px);left:0;right:0;background:var(--bg3);border:2px solid var(--accent);border-radius:10px;max-height:350px;overflow-y:auto;z-index:1000;display:none}
        .dropdown.show{display:block}
        .dropdown-item{padding:15px 20px 15px 55px;cursor:pointer;border-bottom:1px solid var(--border)}
        .dropdown-item:hover{background:rgba(91,124,255,0.1)}
        .dropdown-symbol{font-weight:700;display:block;margin-bottom:3px}
        .result{display:none;margin-bottom:40px}
        .result.show{display:block}
        .widget{max-width:550px;height:550px;margin:0 auto 25px;background:var(--bg3);border:2px solid var(--border);border-radius:20px;padding:50px;display:flex;flex-direction:column;justify-content:space-between;box-shadow:0 20px 60px rgba(0,0,0,0.5);transition:all 0.5s}
        .widget.positive{border-color:var(--green);box-shadow:0 20px 60px rgba(0,0,0,0.5),0 0 40px rgba(34,197,94,0.3)}
        .widget.negative{border-color:var(--red);box-shadow:0 20px 60px rgba(0,0,0,0.5),0 0 40px rgba(239,68,68,0.3)}
        .widget-symbol-badge{display:inline-block;padding:8px 20px;background:rgba(91,124,255,0.15);border:1px solid var(--accent);border-radius:25px;color:var(--accent);font-size:1rem;font-weight:700;margin-bottom:30px}
        .widget-price-section{text-align:center;margin:40px 0}
        .widget-price-label{font-size:0.9rem;color:var(--text2);margin-bottom:10px;text-transform:uppercase;letter-spacing:1px;font-weight:600}
        .widget-price{font-size:4.5rem;font-weight:900;line-height:1;margin-bottom:20px;letter-spacing:-2px}
        .widget-change{font-size:1.3rem;font-weight:700;display:flex;align-items:center;justify-content:center;gap:10px}
        .widget-change.positive{color:var(--green)}
        .widget-change.negative{color:var(--red)}
        .widget-stats{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:30px 0;padding:20px 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
        .stat{text-align:center}
        .stat-label{font-size:0.8rem;color:var(--text2);margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px}
        .stat-value{font-size:1.3rem;font-weight:700}
        .widget-timestamp{text-align:center;color:var(--text2);font-size:0.85rem;margin-top:20px;padding-top:20px;border-top:1px solid var(--border)}
        .widget-brand{text-align:center;color:var(--text2);font-size:0.9rem;font-weight:700;margin-top:10px}
        .export-btn{width:100%;padding:18px;background:linear-gradient(135deg,var(--green),#16a34a);border:none;color:#fff;font-size:1.1rem;font-weight:700;border-radius:10px;cursor:pointer;text-transform:uppercase;transition:all 0.3s;display:flex;align-items:center;justify-content:center;gap:10px}
        .export-btn:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(34,197,94,0.3)}
        .error{background:rgba(239,68,68,0.1);border:1px solid var(--red);padding:20px;border-radius:10px;color:var(--red);text-align:center;margin-bottom:30px;display:none}
        .error.show{display:block}
        @media(max-width:768px){
            .card{min-width:240px;max-width:240px}
            .widget{height:auto;min-height:500px;padding:35px}
            .widget-price{font-size:3.5rem}
        }
    </style>
</head>
<body>
    <header>
        <h1>Ticker Snapshot</h1>
        <p class="subtitle">Instant market prices, shareable as images</p>
    </header>
    <div class="carousel">
        <div class="carousel-inner">
            <div class="card" onclick="loadQuick('BTCUSDT','Bitcoin','crypto')">
                <div class="card-name">Bitcoin</div>
                <div class="card-symbol">BTC</div>
                <div class="tradingview-widget-container card-widget">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
                    {"symbol":"BINANCE:BTCUSDT","width":"100%","height":"100%","locale":"en","colorTheme":"dark","isTransparent":true}
                    </script>
                </div>
            </div>
            <div class="card" onclick="loadQuick('ETHUSDT','Ethereum','crypto')">
                <div class="card-name">Ethereum</div>
                <div class="card-symbol">ETH</div>
                <div class="tradingview-widget-container card-widget">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
                    {"symbol":"BINANCE:ETHUSDT","width":"100%","height":"100%","locale":"en","colorTheme":"dark","isTransparent":true}
                    </script>
                </div>
            </div>
            <div class="card" onclick="loadQuick('SOLUSDT','Solana','crypto')">
                <div class="card-name">Solana</div>
                <div class="card-symbol">SOL</div>
                <div class="tradingview-widget-container card-widget">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
                    {"symbol":"BINANCE:SOLUSDT","width":"100%","height":"100%","locale":"en","colorTheme":"dark","isTransparent":true}
                    </script>
                </div>
            </div>
            <div class="card" onclick="loadQuick('AAPL','Apple','stock')">
                <div class="card-name">Apple</div>
                <div class="card-symbol">AAPL</div>
                <div class="tradingview-widget-container card-widget">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
                    {"symbol":"NASDAQ:AAPL","width":"100%","height":"100%","locale":"en","colorTheme":"dark","isTransparent":true}
                    </script>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <h2 class="section-title">Generate Snapshot</h2>
        <p class="section-subtitle">Search any stock or cryptocurrency</p>
        <div class="input-box">
            <div class="tabs">
                <button class="tab active" id="stockTab" onclick="setType('stock')">Stocks</button>
                <button class="tab" id="cryptoTab" onclick="setType('crypto')">Crypto</button>
            </div>
            <div class="search-wrapper">
                <span class="search-icon">üîç</span>
                <input type="text" class="search-input" id="searchInput" placeholder="Type symbol (e.g., AAPL, BTC)..." autocomplete="off">
                <div class="dropdown" id="dropdown"></div>
            </div>
            <button class="generate-btn" onclick="createSnapshot()">Create Snapshot</button>
        </div>
        <div class="error" id="error"></div>
        <div class="result" id="result">
            <div class="widget" id="widget">
                <div>
                    <div class="widget-symbol-badge" id="wSymbol">---</div>
                </div>
                <div class="widget-price-section">
                    <div class="widget-price-label">Current Price</div>
                    <div class="widget-price" id="wPrice">$0.00</div>
                    <div class="widget-change" id="wChange">
                        <span id="wChangeValue">---</span>
                    </div>
                </div>
                <div class="widget-stats">
                    <div class="stat">
                        <div class="stat-label">24h High</div>
                        <div class="stat-value" id="wHigh">---</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">24h Low</div>
                        <div class="stat-value" id="wLow">---</div>
                    </div>
                </div>
                <div>
                    <div class="widget-timestamp" id="wTime">---</div>
                    <div class="widget-brand">TICKER SNAPSHOT</div>
                </div>
            </div>
            <button class="export-btn" onclick="saveImage()">
                <span>üíæ</span>
                <span>Save as Image</span>
            </button>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
let activeType='stock';
let currentData=null;
const STOCKS=['AAPL','MSFT','GOOGL','AMZN','TSLA','META','NVDA','JPM','V','WMT'];
const CRYPTO=['BTC','ETH','BNB','XRP','SOL','ADA','DOT','DOGE','MATIC','AVAX'];

function setType(type){
activeType=type;
document.getElementById(‚ÄòstockTab‚Äô).classList.remove(‚Äòactive‚Äô);
document.getElementById(‚ÄòcryptoTab‚Äô).classList.remove(‚Äòactive‚Äô);
document.getElementById(type+‚ÄòTab‚Äô).classList.add(‚Äòactive‚Äô);
document.getElementById(‚Äòdropdown‚Äô).classList.remove(‚Äòshow‚Äô);
}

function loadQuick(tvSymbol,name,type){
const sym=tvSymbol.replace(‚ÄòUSDT‚Äô,‚Äô‚Äô);
document.getElementById(‚ÄòsearchInput‚Äô).value=sym;
setType(type);
createSnapshot();
window.scrollTo({top:document.body.scrollHeight,behavior:‚Äòsmooth‚Äô});
}

document.getElementById(‚ÄòsearchInput‚Äô).addEventListener(‚Äòinput‚Äô,function(e){
const q=e.target.value.trim().toUpperCase();
const dd=document.getElementById(‚Äòdropdown‚Äô);
if(q.length<1){dd.classList.remove(‚Äòshow‚Äô);return}
const list=activeType===‚Äòstock‚Äô?STOCKS:CRYPTO;
const matches=list.filter(s=>s.includes(q));
if(matches.length){
dd.innerHTML=matches.map(s=>‚Äô<div class="dropdown-item" onclick="pickSymbol(\''+s+'\')"><span class="dropdown-symbol">‚Äô+s+‚Äô</span></div>‚Äô).join(‚Äô‚Äô);
dd.classList.add(‚Äòshow‚Äô);
}else{dd.classList.remove(‚Äòshow‚Äô)}
});

document.getElementById(‚ÄòsearchInput‚Äô).addEventListener(‚Äòkeypress‚Äô,function(e){
if(e.key===‚ÄòEnter‚Äô)createSnapshot()
});

function pickSymbol(s){
document.getElementById(‚ÄòsearchInput‚Äô).value=s;
document.getElementById(‚Äòdropdown‚Äô).classList.remove(‚Äòshow‚Äô);
}

function createSnapshot(){
const sym=document.getElementById(‚ÄòsearchInput‚Äô).value.trim().toUpperCase();
if(!sym){
document.getElementById(‚Äòerror‚Äô).textContent=‚ÄòPlease enter a symbol‚Äô;
document.getElementById(‚Äòerror‚Äô).classList.add(‚Äòshow‚Äô);
return;
}
document.getElementById(‚Äòerror‚Äô).classList.remove(‚Äòshow‚Äô);

```
const exchange=activeType==='crypto'?'BINANCE':'NASDAQ';
const pair=activeType==='crypto'?sym+'USDT':sym;
const fullSymbol=exchange+':'+pair;

document.getElementById('wSymbol').textContent=sym;
document.getElementById('wPrice').textContent='Loading...';
document.getElementById('wChangeValue').textContent='---';
document.getElementById('wHigh').textContent='---';
document.getElementById('wLow').textContent='---';
document.getElementById('wTime').textContent='Snapshot: '+getTimestamp();
document.getElementById('result').classList.add('show');

fetchTradingViewData(fullSymbol,sym);
```

}

function fetchTradingViewData(fullSymbol,sym){
const widget=document.getElementById(‚Äòwidget‚Äô);
widget.className=‚Äòwidget‚Äô;

```
const script=document.createElement('script');
script.src='https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js';
script.async=true;
script.onload=function(){
    setTimeout(()=>{
        try{
            const iframe=document.querySelector('.result iframe');
            if(iframe){
                const iframeDoc=iframe.contentDocument||iframe.contentWindow.document;
                const priceEl=iframeDoc.querySelector('[class*="price"]');
                const changeEl=iframeDoc.querySelector('[class*="change"]');
                if(priceEl)document.getElementById('wPrice').textContent=priceEl.textContent;
                if(changeEl){
                    const changeText=changeEl.textContent;
                    const isPositive=changeText.includes('+');
                    document.getElementById('wChangeValue').textContent=changeText;
                    document.getElementById('wChange').className='widget-change '+(isPositive?'positive':'negative');
                    widget.className='widget '+(isPositive?'positive':'negative');
                }
            }
        }catch(e){
            console.log('Cross-origin access blocked');
        }
    },2000);
};

const mockData={
    'BTC':{price:79142.59,change:0.51,high:79500,low:78800},
    'ETH':{price:2459.23,change:0.31,high:2480,low:2440},
    'SOL':{price:248.15,change:-0.23,high:252,low:245},
    'AAPL':{price:234.52,change:1.24,high:236,low:232},
    'MSFT':{price:425.89,change:0.87,high:428,low:422},
    'GOOGL':{price:178.34,change:-0.45,high:180,low:177},
    'TSLA':{price:387.92,change:2.15,high:395,low:382},
    'NVDA':{price:142.67,change:1.89,high:145,low:140}
};

if(mockData[sym]){
    const data=mockData[sym];
    document.getElementById('wPrice').textContent='$'+formatPrice(data.price);
    const changeVal=(data.change>=0?'‚ñ≤ +':'‚ñº ')+data.change.toFixed(2)+'%';
    document.getElementById('wChangeValue').textContent=changeVal;
    const changeEl=document.getElementById('wChange');
    changeEl.className='widget-change '+(data.change>=0?'positive':'negative');
    widget.className='widget '+(data.change>=0?'positive':'negative');
    document.getElementById('wHigh').textContent='$'+formatPrice(data.high);
    document.getElementById('wLow').textContent='$'+formatPrice(data.low);
}else{
    document.getElementById('wPrice').textContent='$---';
    document.getElementById('wChangeValue').textContent='Data unavailable';
}
```

}

function saveImage(){
const btn=event.target;
btn.disabled=true;
btn.innerHTML=‚Äô<span>‚è≥</span> Saving‚Ä¶‚Äô;
html2canvas(document.getElementById(‚Äòwidget‚Äô),{scale:2,backgroundColor:null}).then(function(canvas){
canvas.toBlob(function(blob){
const url=URL.createObjectURL(blob);
const link=document.createElement(‚Äòa‚Äô);
link.href=url;
const sym=document.getElementById(‚ÄòsearchInput‚Äô).value;
const timestamp=new Date().toISOString().slice(0,19).replace(/:/g,‚Äô-‚Äô);
link.download=‚Äòticker-‚Äô+sym+‚Äô-‚Äô+timestamp+‚Äô.png‚Äô;
link.click();
URL.revokeObjectURL(url);
btn.disabled=false;
btn.innerHTML=‚Äô<span>üíæ</span><span>Save as Image</span>‚Äô;
});
});
}

function formatPrice(p){
if(p>=1)return p.toLocaleString(‚Äòen-US‚Äô,{minimumFractionDigits:2,maximumFractionDigits:2});
if(p>=0.01)return p.toLocaleString(‚Äòen-US‚Äô,{minimumFractionDigits:4,maximumFractionDigits:4});
return p.toLocaleString(‚Äòen-US‚Äô,{minimumFractionDigits:6,maximumFractionDigits:6});
}

function getTimestamp(){
const d=new Date();
const months=[‚ÄòJan‚Äô,‚ÄòFeb‚Äô,‚ÄòMar‚Äô,‚ÄòApr‚Äô,‚ÄòMay‚Äô,‚ÄòJun‚Äô,‚ÄòJul‚Äô,‚ÄòAug‚Äô,‚ÄòSep‚Äô,‚ÄòOct‚Äô,‚ÄòNov‚Äô,‚ÄòDec‚Äô];
let h=d.getHours();
const m=d.getMinutes().toString().padStart(2,‚Äò0‚Äô);
const s=d.getSeconds().toString().padStart(2,‚Äò0‚Äô);
const ap=h>=12?‚ÄòPM‚Äô:‚ÄòAM‚Äô;
h=h%12||12;
return months[d.getMonth()]+‚Äô ‚Äò+d.getDate()+‚Äô, ‚Äò+d.getFullYear()+‚Äô at ‚Äò+h+‚Äô:‚Äô+m+‚Äô:‚Äô+s+‚Äô ‚Äô+ap;
}
</script>

</body>
</html>